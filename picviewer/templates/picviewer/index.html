<!DOCTYPE html>

{% load staticfiles %}

<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
	<head>
		<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.3/jquery.min.js"></script>
		<script type="text/javascript" src="{% static 'picviewer/js/main.js' %}"></script>
		<script>
            currentState = new CurrentState("{{subreddit}}", "{{order}}", "{{topTime}}", "{{query}}", "{{searchTime}}", "{{searchOrder}}");
		</script>
		<link type="text/css" rel="stylesheet" href="{% static 'picviewer/css/styles.css' %}" />
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />

		{% if name != "" %}
		<title>r/{{subreddit}} | Reddit Picture Viewer</title>
		{% else %}
		<title>Reddit Picture Viewer</title>
		{% endif %}

		<meta name="author" content="David Zou" />
		<meta name="description" content="Website to quickly view pictures/gifs from Reddit">
		<meta name="keywords" content="reddit, pictures, cats">
		<!-- Date: 2014-01-22 -->
	</head>
	<body>
		<nav id='subredditsBar'>
			<input type='text' id='subredditSearcher' onkeydown='gotoSubreddit(this.value,event.keyCode)' placeholder='Goto subreddit'/>
			<span class="separator">|</span>
			<a class='subredditURL' href='{% url "picviewer:default" %}'>FRONT</a>
			<span class="separator">-</span>
			<a class='subredditURL' href='{% url "picviewer:subreddit" "all" %}'>ALL</a>
			<span class="separator">|</span>
			{% for sr in subreddits %}
			<a class='subredditURL' href='{% url "picviewer:subreddit" sr   %}'>{{sr|upper}}</a>
			{% if not forloop.last%}
			<span class="separator">-</span>
			{% endif %}
			{% endfor %}

			<a id="sourceCode" href="https://github.com/f2rf2r/RedditPicViewer" target="_blank">Source code</a>
		</nav>

		<header id='headerBar'>
			<a class='logoLink' href='{{link}}' target="_blank"><img id='logo' src='{{image}}' alt="logo"></a>
			<a class='logoLink' href='{{link}}' target="_blank"><span id='subredditName'>{{name}}</span></a>
			<nav id='sortBar'>
				{% if subreddit == "" %}
				{% for ord in orders %}
				<a class='sortURL' id='sort{{ord}}' href='{% url "picviewer:sort" ord  %}'><span class='sortOrder'>{{ord}}</span></a>
				{% endfor %}
				{% else %}
				{% for ord in orders %}
				<a class='sortURL' id='sort{{ord}}' href='{% url "picviewer:subredditSort" subreddit ord  %}'><span class='sortOrder'>{{ord}}</span></a>
				{% endfor %}
				{% endif %}
			</nav>

			{% if order == "top" %}
			<select id="topTimeSelector" onchange=setTopTime(this)>
				{% for t in timeFrames %}
				<option class='topTimeOption'
				{% if t.0 == topTime %} selected {% endif %}
				value={{t.0}}>{{t.1}}</option>
				{% endfor %}
			</select>
			{% endif %}

			<button id="searchButton" onclick='sendSearchRequest()'>
				Search
			</button>
			<div id='searchBar'>
				<input type='text' id='searchBox' onkeydown='checkSearchBox(event.keyCode)' value="{{query}}" placeholder='Search'/>

				<div id="searchOptions">
					<select id="searchSortSelector">
						{% for so in searchOrders %}
						<option class='searchSortOption'
						{% if so == searchOrder %} selected {% endif %}
						value={{so}}>{{so}}</option>
						{% endfor %}
					</select>
					<select id="searchTimeSelector">
						{% for t in timeFrames %}
						<option class='searchTimeOption'
						{% if t.0 == searchTime %} selected {% endif %}
						value={{t.0}}>{{t.1}}</option>
						{% endfor %}
					</select>
				</div>
			</div>
		</header>

		<section id='gallery'>
			<script>
                for (var x = 0; x < currentState.numCols; x++) {
                    document.write("<ul class='imageList' id='imageList" + x + "'></ul>");
                }
			</script>
		</section>

		<section id="indicator">
			<noscript>
				Please enable javascript to use this site.
			</noscript>
			<div id='endNotification'>
				There are no more links
			</div>
			<button id="loadMoreButton" onclick='sendRequest("{{subreddit}}")'>
				Load more
			</button>
			<img src="{% static 'picviewer/media/loading.gif' %}" id='loadingGif' alt='Loading...'>

		</section>

		<script>
            setup();
		</script>
	</body>

</html>

